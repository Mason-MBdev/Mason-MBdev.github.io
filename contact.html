<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EXGNL7CQT6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EXGNL7CQT6');
</script>

<body>
    <section id="Title">
        <div class="Title">
            <h1> MASON BARNEY </h1>
        </div>
    </section>

    <section id="gitlink">
        <gitlink>
            <ul class="git__link--list"></ul>
                <li>
                    <a href="https://github.com/Mason-MBdev" class="
                    nav__link--anchor
                    nav__link--anchor-primary
                    " target="_blank"><span class = "text--heading ">PROJECTS</span></a>
                </li>
            </ul>
        </gitlink>
    </section>

    <section id="nav-mobile">
        <nav-mobile>
            <ul class="nav__link--list">
                <li>
                    <a href="Mason_Barney_Resume.pdf" class="
                    nav__link--anchor
                    nav__link--anchor-primary
                    " target="_blank"><span class = "text--heading ">RESUME</span></a>
                </li>
                <li>
                    <a href="https://www.mbdev.ca/contact.html" class="
                    nav__link--anchor
                    nav__link--anchor-primary
                    "><span class = "text--heading ">CONTACT</span></a>
                </li>
            </ul>
        </nav-mobile>
    </section>

    <section id="nav">
        <nav>
            <div class="Logo">
                <a href="https://mbdev.ca/index" class="text--header">
                    <strong><span class="text--heading">MASON B.</span></strong>
                </a>
                <a href="https://mbdev.ca/index" class="short-text">
                    <strong><span class="text--heading">MASON B.</span></strong>
                </a>
            </div>
            <strong class = "shorter-text"><span class = "text--heading ">MB</span></strong></div>
            <ul class="nav__link--list">
                <li>
                    <a href="https://github.com/Mason-MBdev" class="
                    nav__link--anchor
                    nav__link--anchor-primary
                    " target="_blank"><span class = "text--heading ">PROJECTS</span></a>
                </li>
                <li>
                    <a href="https://www.mbdev.ca/contact.html" class="
                    nav__link--anchor
                    nav__link--anchor-primary
                    "><span class = "text--heading ">CONTACT</span></a>    
                </li>
            </ul>
        </nav>

    <!-- user input form, in progress -->
    <div class="contact_container">
        <h1><span class="text--purple">CONTACT</span></h1>
        <h1> <br>Feel free to reach out using my socials / contact info,<br> or connect with me directly using this form.</h1>
        <form id="contactForm" method="post">>
            <div class="identifiers">
                <div class="input-group">
                    <label for="Name"> <p>Name</p> </label>
                    <input type="text" id="Name" name="Name" required>
                </div>
                <div class="input-group">
                    <label for="Email"> <p>Email</p> </label>
                    <input type="Email" id="Email" name="Email" required>
                </div>
            </div>
            <div class="input-group">
                <label for="message"> <p>Message</p> </label>
                <textarea id="message" name="message" rows="8"></textarea>
            </div>
            <button type="submit" class="submit">SUBMIT</button>
            <p id="statusMessage" style="display: none;"></p>
        </form>
    </div>

    <!-- JavaScript code -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById('contactForm');
            const statusMessage = document.getElementById('statusMessage');

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                try {
                    const response = await fetch('https://pi.mbdev.ca/submit_form', {
                        method: 'POST',
                        body: formData
                    });
                    const data = await response.json();
                    if (response.ok) {
                        statusMessage.textContent = data.message; // Display the message from the server
                        statusMessage.style.color = 'green';
                        statusMessage.style.display = 'block';
                        form.reset();
                    } else {
                        statusMessage.textContent = 'Error: ' + data.message;
                        statusMessage.style.color = 'red';
                        statusMessage.style.display = 'block';
                    }
                } catch (error) {
                    console.error('Error:', error);
                    statusMessage.textContent = 'An unexpected error occurred.';
                    statusMessage.style.color = 'red';
                    statusMessage.style.display = 'block';
                }
            });
        });
        
    </script>
</body>
</html>